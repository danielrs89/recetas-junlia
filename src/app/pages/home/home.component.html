<!-- 
  SECCIÓN PRINCIPAL DEL RECETARIO 
  - Contiene título, descripción, buscador, carrusel y categorías.
  - El buscador filtra recetas en tiempo real y muestra sugerencias.
-->

<section>
  <!-- Título y descripción de bienvenida -->
  <article class="container my-5">
    <h1 class="display-1 text-center my-3">{{ title }}</h1>
    <p class="text-center w-75 mx-auto lead mb-5 text-muted">
      ¡Bienvenida a mi recetario! <br />
      Aquí encontrarás una variedad de recetas deliciosas y fáciles de preparar.
      Desde platos principales hasta postres, hay algo para todos los gustos.
      Explora las categorías y descubre nuevas ideas para tus comidas diarias.
      <br /><br />
      ¡Espero que disfrutes cocinando. <br />
      ¡Buen provecho!
    </p>
  </article>

  <!-- 
    BUSCADOR PRINCIPAL 
    - Usa ngModel para two-way binding con searchString.
    - Filtra recetas en tiempo real (input) y muestra dropdown con resultados.
    - La imagen tiene draggable="false" para evitar arrastre.
  -->
  <article class="container mb-5">
    <div class="row justify-content-center">
      <!-- Imagen decorativa (no arrastrable) -->
      <div class="container">
        <img
          alt="junpig"
          src="./assets/images/junpig.png"
          class="w-25 rounded mx-auto d-block"
          draggable="false"
        />
      </div>

      <!-- Input de búsqueda con dropdown de sugerencias -->
      <div class="col-md-8 col-lg-6">
        <div class="position-relative">
          <input
            class="form-control form-control-lg shadow-sm"
            type="search"
            placeholder="Introduce ingredientes..."
            aria-label="Buscar recetas"
            [(ngModel)]="searchString"
            (input)="searchRecipeString()"
            [attr.data-bs-toggle]="
              recipesFiltered.length > 0 ? 'dropdown' : null
            "
          />

          <!-- Dropdown con resultados de búsqueda -->
          @if (recipesFiltered.length > 0) {
          <div class="dropdown-menu w-100 show">
            @for (recipe of recipesFiltered; track $index) {
            <a
              class="dropdown-item"
              [routerLink]="['/recipe', recipe.id_recipe]"
              (click)="setSearchString()"
            >
              {{ recipe.name_recipe }}
            </a>
            }
          </div>
          }
        </div>
      </div>
    </div>
  </article>

  <!-- Carrusel de recetas destacadas -->
  <article class="container my-5">
    <h1 class="display-4 text-center my-3">Descubre recetas</h1>
    <app-carousel />
  </article>

  <!-- Sección de categorías (pendiente de contenido) -->
  <article class="container my-5">
    <h1 class="display-4 text-center my-3">Categorías</h1>
  </article>
</section>
